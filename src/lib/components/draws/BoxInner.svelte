<script>
    export let name = "ТЕСТ";
    export let node_type = "text";
    export let isLinked = false;
    export let gotConditions = false;

    $: dashed_border = (gotConditions) ? true : false;
    //$: console.log("[BoxInner]: gotCondition: ", gotConditions);

    /*
        Компонент используется для отображения внутренних элементов в блоке на канве
    */
</script>


<div class="wrapper" class:dashed_border>
    <svg class="icon" viewbox="0 0 20 20">
        {#if node_type === "entry"}           
                <path d="M14.19 0H5.81C2.17 0 0 2.17 0 5.81V14.18C0 17.83 2.17 20 5.81 20H14.18C17.82 20 19.99 17.83
                 19.99 14.19V5.81C20 2.17 17.83 0 14.19 0ZM8.95 15.51C8.66 15.8 8.11 16.08 7.71 16.14L5.25 16.49C5.16
                  16.5 5.07 16.51 4.98 16.51C4.57 16.51 4.19 16.37 3.92 16.1C3.59 15.77 3.45 15.29 3.53 14.76L3.88
                   12.3C3.94 11.89 4.21 11.35 4.51 11.06L8.97 6.6C9.05 6.81 9.13 7.02 9.24 7.26C9.34 7.47 9.45
                    7.69 9.57 7.89C9.67 8.06 9.78 8.22 9.87 8.34C9.98 8.51 10.11 8.67 10.19 8.76C10.24 8.83 10.28
                     8.88 10.3 8.9C10.55 9.2 10.84 9.48 11.09 9.69C11.16 9.76 11.2 9.8 11.22 9.81C11.37 9.93 11.52 10.05 11.65 10.14C11.81 10.26 11.97 10.37 12.14 10.46C12.34 10.58 12.56 10.69 12.78 10.8C13.01 10.9 13.22 10.99 13.43 11.06L8.95 15.51ZM15.37 9.09L14.45 10.02C14.39 10.08 14.31 10.11 14.23 10.11C14.2 10.11 14.16 10.11 14.14 10.1C12.11 9.52 10.49 7.9 9.91 5.87C9.88 5.76 9.91 5.64 9.99 5.57L10.92 4.64C12.44 3.12 13.89 3.15 15.38 4.64C16.14 5.4 16.51 6.13 16.51 6.89C16.5 7.61 16.13 8.33 15.37 9.09Z"/>          
        {:else if node_type === "text"}
                <path d="M18.95 2.13C18.66 1.71 18.29 1.34 17.87 1.05C16.92 0.36 15.68 0 14.19 0H5.81C5.61 0 5.41 0.00999997 5.22 0.03C1.94 0.24 0 2.37 0 5.81V14.19C0 15.68 0.36 16.92 1.05 17.87C1.34 18.29 1.71 18.66 2.13 18.95C2.95 19.55 3.99 19.9 5.22 19.98C5.41 19.99 5.61 20 5.81 20H14.19C17.83 20 20 17.83 20 14.19V5.81C20 4.32 19.64 3.08 18.95 2.13ZM16.75 6.9C16.75 7.31 16.41 7.65 16 7.65C15.59 7.65 15.25 7.31 15.25 6.9V5.72C15.25 5.4 14.99 5.14 14.67 5.14H10.75V14.86H12.53C12.94 14.86 13.28 15.2 13.28 15.61C13.28 16.02 12.94 16.36 12.53 16.36H7.47C7.06 16.36 6.72 16.02 6.72 15.61C6.72 15.2 7.06 14.86 7.47 14.86H9.25V5.14H5.33C5.01 5.14 4.75 5.4 4.75 5.72V6.9C4.75 7.31 4.41 7.65 4 7.65C3.59 7.65 3.25 7.31 3.25 6.9V5.72C3.25 4.57 4.18 3.64 5.33 3.64H14.66C15.81 3.64 16.74 4.57 16.74 5.72V6.9H16.75Z" />
        {:else if node_type === "checkbox"}
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.67 0H14.34C17.73 0 20 2.38 20 5.92V14.091C20 17.62 17.73 20 14.34 20H5.67C2.28 20 0 17.62 0 14.091V5.92C0 2.38 2.28 0 5.67 0ZM9.43 12.99L14.18 8.24C14.52 7.9 14.52 7.35 14.18 7C13.84 6.66 13.28 6.66 12.94 7L8.81 11.13L7.06 9.38C6.72 9.04 6.16 9.04 5.82 9.38C5.48 9.72 5.48 10.27 5.82 10.62L8.2 12.99C8.37 13.16 8.59 13.24 8.81 13.24C9.04 13.24 9.26 13.16 9.43 12.99Z" />
        {:else if node_type === "select"}
                <path fill-rule="evenodd" clip-rule="evenodd" d="M5.67 0H14.34C17.73 0 20 2.38 20 5.92V14.091C20 17.62 17.73 20 14.34 20H5.67C2.28 20 0 17.62 0 14.091V5.92C0 2.38 2.28 0 5.67 0ZM4 10.0001C4 6.68812 6.688 4.00012 10 4.00012C13.318 4.00012 16 6.68812 16 10.0001C16 13.3121 13.312 16.0001 10 16.0001C6.688 16.0001 4 13.3121 4 10.0001ZM7.48 10.0001C7.48 11.4041 8.614 12.5381 10.018 12.5381C11.422 12.5381 12.556 11.4041 12.556 10.0001C12.556 8.59612 11.422 7.46212 10.018 7.46212C8.614 7.46212 7.48 8.59612 7.48 10.0001Z" />
        {/if}
    </svg>

       <span
       on:selectstart={ (e) => e.preventDefault() }
       on:dragstart={ (e) => e.preventDefault() }
       >{name}</span>

    {#if isLinked}
        <svg class="link" width="12" height="12" viewBox="0 0 12 12" xmlns="http://www.w3.org/2000/svg">
            <path d="M6.25 7.375H5C4.795 7.375 4.625 7.205 4.625 7C4.625 6.795 4.795 6.625 5 6.625H6.25C7.56 6.625 8.625 5.56 8.625 4.25C8.625 2.94 7.56 1.875 6.25 1.875H3.75C2.44 1.875 1.375 2.94 1.375 4.25C1.375 4.8 1.57 5.335 1.92 5.76C2.05 5.92 2.03 6.155 1.87 6.29C1.71 6.42 1.475 6.4 1.34 6.24C0.88 5.68 0.625 4.975 0.625 4.25C0.625 2.525 2.025 1.125 3.75 1.125H6.25C7.975 1.125 9.375 2.525 9.375 4.25C9.375 5.975 7.975 7.375 6.25 7.375Z" />
            <path d="M8.25 10.875H5.75C4.025 10.875 2.625 9.475 2.625 7.75C2.625 6.025 4.025 4.625 5.75 4.625H7C7.205 4.625 7.375 4.795 7.375 5C7.375 5.205 7.205 5.375 7 5.375H5.75C4.44 5.375 3.375 6.44 3.375 7.75C3.375 9.06 4.44 10.125 5.75 10.125H8.25C9.56 10.125 10.625 9.06 10.625 7.75C10.625 7.2 10.43 6.665 10.08 6.24C9.95 6.08 9.97 5.845 10.13 5.71C10.29 5.575 10.525 5.6 10.66 5.76C11.125 6.32 11.38 7.025 11.38 7.75C11.375 9.475 9.975 10.875 8.25 10.875Z"/>
        </svg>
    {/if}
</div>


<style>
    .wrapper{
        color: inherit;
        height: 100%;
        width: 100%;
        display: flex;
        align-items: center;
        justify-content: start;
        gap: .875rem;
        padding: .625rem;
        cursor: pointer;
        border: 1px solid currentcolor;
        border-radius: 8px;
        background-color: inherit;
        position: relative;
    }


    .dashed_border{
        border: 1px dashed currentcolor;
    }


    span{
        color: currentcolor;
        font-size: .875rem;
    }


    .icon{
        height: 100%;
        flex: 0 0 1.25rem;
    }


    .icon path{
        fill: inherit;
    }


    .link{
        position: absolute;
        top: 6px;
        right: 6px;

    }


    .link path{
        fill: inherit;
    }
</style>

